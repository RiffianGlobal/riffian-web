import{T as m,b as u,e as g}from"./index-tq4ZD4lb.js";import{w,a as x}from"./prompt-yyMsmos-.js";import{a as y}from"./claim-IdcAhX-Y.js";import{a as b,x as o,c as p,h as $,e as j,u as k,f as d,d as L,b as f}from"./vendor-od9KRoES.js";const T="li.header{margin-bottom:.5rem;font-weight:300;--tw-text-opacity: 1;color:#fafaf9;color:rgba(250,250,249,var(--tw-text-opacity));border-bottom:1px solid #898989}li.item:hover{--tw-bg-opacity: 1;background-color:#3f3f46;background-color:rgba(63,63,70,var(--tw-bg-opacity))}@media (min-width: 500px){.name{font-size:1.25rem;line-height:1.75rem}}.icon{font-size:1.875rem;line-height:2.25rem}@media (max-width: 500px){.icon{font-size:1.5rem;line-height:2rem}}";var V=Object.defineProperty,_=Object.getOwnPropertyDescriptor,r=(e,t,l,i)=>{for(var s=i>1?void 0:i?_(t,l):t,n=e.length-1,c;n>=0;n--)(c=e[n])&&(s=(i?c(t,l,s):c(s))||s);return i&&s&&V(t,l,s),s};let a=class extends m(T){constructor(){super(...arguments),this.bindBridge=new b(this,u),this.weekly=!1,this.showAlbumVote=!1,this.albumToVote={id:"",supply:0,url:"",name:"",creator:{address:""},uri:""},this.pending=!1,this.prompt=!1,this.promptMessage="",this.init=async()=>{this.pending=!0;try{let t=this.weekly?await w(10,await y()):await x(10);this.subjectList=this.weekly?t.subjectWeeklyVotes:t.subjects}catch(t){console.error(t),this.promptMessage=t,this.prompt=!0;return}this.pending=!1;for(var e=0;e<this.subjectList.length;e++)if(this.weekly){let t=this.subjectList[e];this.subjectList[e]=t.subject,this.subjectList[e].volumeTotal=t.volumeTotal}},this.close=()=>{this.showAlbumVote=!1,this.init()}}get disabled(){return!u.bridge.account}connectedCallback(){super.connectedCallback(),this.init()}getRandomInt(e){return Math.floor(Math.random()*e)}static dayChange(e){if(e.voteLogs.length==0)return"New";{let t=e.voteLogs[0].supply,l=e.supply,i=Math.abs(t-l),s=(i*100/t).toFixed(1);return t>l?o`<p class="text-red-500">-${s}%</p>`:o`<p class="text-green-500">+${s}%</p>`}}render(){return o`<div>${p(this.pending&&!this.subjectList,()=>o`<div name="Loading" class="doc-intro"><div class="flex flex-col gap-8 m-8"><loading-skeleton num="3"></loading-skeleton><loading-skeleton num="3"></loading-skeleton><loading-skeleton num="3"></loading-skeleton></div></div>`)} ${p(this.subjectList,()=>o`<ul role="list"><li class="flex header p-1"><div class="w-16">Rank</div><div class="flex-auto">Collection</div><div class="flex-auto text-right pr-3">${this.weekly?"Volume":"Price"}</div><div class="flex-none w-16 text-right">24H</div>${p(this.pending,()=>o`<div><i class="text-sm mdi mdi-loading"></i><div></div></div>`)}</li>${$(this.subjectList,(e,t)=>o`<li class="flex py-2 items-center cursor-pointer ${j({"bg-zinc-800/50":t%2})}" @click="${()=>{this.disabled?g.emit("connect-wallet"):(this.albumToVote=e,location.href="/track/"+e.id)}}"><div class="flex-none w-16 pl-4 text-lg font-light">${t+1}</div><div class="flex-initial flex"><div class="w-[4.6rem] h-[4.6rem] mr-4"><img-loader sizes="74px, 74px" src="${e.uri}"></img-loader></div><div><p class="name truncate mt-2">${e.name}</p><span class="icon mt-1"><i class="mdi mdi-play-circle-outline"></i></span></div></div><div class="flex-auto text-right pr-3"><p class="text-2xl">${this.weekly?k(e.volumeTotal,18):(Number(e.supply)+1)/10}</p></div><div class="flex-none w-16 text-lg font-light">${a.dayChange(e)}</div></li>`)}</ul>${p(this.showAlbumVote,()=>o`<vote-album-dialog album="${this.albumToVote.id}" url="${this.albumToVote.uri}" name="${this.albumToVote.name}" votes="${this.albumToVote.supply}" author="${this.albumToVote.creator.address}" @close="${this.close}"></vote-album-dialog>`)}`)}</div>${p(this.prompt,()=>o`<p class="text-center text-orange-600">${this.promptMessage}</p>`)}`}};r([L({type:Boolean})],a.prototype,"weekly",2);r([d()],a.prototype,"subjectList",2);r([d()],a.prototype,"showAlbumVote",2);r([d()],a.prototype,"albumToVote",2);r([d()],a.prototype,"pending",2);r([d()],a.prototype,"prompt",2);r([d()],a.prototype,"promptMessage",2);a=r([f("top-album")],a);var P=Object.defineProperty,C=Object.getOwnPropertyDescriptor,v=(e,t,l,i)=>{for(var s=i>1?void 0:i?C(t,l):t,n=e.length-1,c;n>=0;n--)(c=e[n])&&(s=(i?c(t,l,s):c(s))||s);return i&&s&&P(t,l,s),s};let h=class extends m(""){constructor(){super(...arguments),this.bindBridge=new b(this,u),this.dialog=!1,this.open=()=>{this.disabled?g.emit("connect-wallet"):this.dialog=!0},this.close=()=>this.dialog=!1}get disabled(){return!u.bridge.account}render(){return o`<ui-button icon @click="${this.open}" title="Bind Social"><i class="i mdi mdi-twitter"></i></ui-button>${p(this.dialog,()=>o`<create-social-dialog @close="${this.close}"></create-social-dialog>`)}`}};v([d()],h.prototype,"dialog",2);h=v([f("bind-social-btn")],h);
